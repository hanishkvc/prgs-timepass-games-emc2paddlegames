<html>
	<head>
		<title> Secured Photos </title>
		<withloveto> Shreya, Kunju, Nanda, Chinnu </withloveto>
	</head>
	<body>
		<div id="top">
		<h2> Secured Photos </h2>
		</div>
		<div id="main">
			<video id="video" width=320>
				Video/Image capture not supported on this Browser.
			</video>
			<canvas id="canvas"></canvas>
		</div>
		<div id="controls">
		</div>
	<script>
		var gVideo;
		var gCanvas;
		var gCtxt;
		var bX, bY;
		const bW = 20;
		const bH = 20;
		var bXD = 0, bYD = 2;
		const bXAdj = Math.round(bW/2, 0);
		var pX, bY;
		const pW = 40, pH = 5, pD = 10;
		const pXAdj = Math.round(pW/2, 0);


		function display_me() {
			gCtxt.fillStyle = "#208080";
			gCtxt.fillRect(0, 0, gCanvas.width, gCanvas.height);
			gCtxt.fillStyle = "#802020";
			gCtxt.fillRect(bX-bXAdj, bY, bW, bH);
			gCtxt.fillStyle = "#202020";
			gCtxt.fillRect(pX-pXAdj, pY, pW, pH);
		}


		function next_frame() {
			bY += bYD;
			bX += bXD;
			if ((pY - bY) < pH) {
				console.log("INFO: Ball reached bottom");
				bD = bX - pX;
				if (Math.abs(bD) > pXAdj) {
					console.log(`Oops:Dropped the ball ${bD}`);
				} else {
					console.log(`INFO:Byalalu, ball has contacted paddle ${bD}`);
					bYD = -1*bYD;
				}
			}
			if ((bY < 0) && (bYD < 0)) {
				console.log("INFO: Ball reached top");
				bYD = -1*bYD;
			}
			display_me();
		}


		function handle_key(ev) {
			if (ev.key === "ArrowLeft") {
				pX -= pD;
				if (pX <= 0) pX = 0;
			} else if (ev.key === "ArrowRight") {
				pX += pD;
				if (pX >= gCanvas.width) pX = gCanvas.width;
			}
		}


		function init_me() {
			gVideo = document.getElementById("video");
			gCanvas = document.getElementById("canvas");
			gCtxt = gCanvas.getContext("2d");
			bX = Math.random()*gCanvas.width;
			bY = 0;
			pX = Math.random()*gCanvas.width;
			pY = gCanvas.height-10;
			setInterval(next_frame, 50);
			window.onkeydown = handle_key;
		}


		document.addEventListener("DOMContentLoaded", (ev) => {
			init_me();
		});
	</script>

	</body>
</html>
